<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Diretor - EduMania</title>
    <link rel="stylesheet" href="/static/base.css">
    <link rel="stylesheet" href="/static/panel-style.css">
    <link rel="stylesheet" href="/static/director-style.css">
</head>
<body>
    <div class="layout-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>EduMania</h2>
            </div>

            <nav class="sidebar-menu">
                <a href="/logout" class="menu-item">üö™ Sair</a>
            </nav>
        </aside>

        <!-- Conte√∫do Principal -->
        <main class="main-content">
            <!-- Cabe√ßalho -->
            <div class="panel-header">
                <div>
                    <h1>Painel do Diretor</h1>
                    <p class="subtitle">Gerencie a institui√ß√£o</p>
                </div>
                <div class="alert alert-danger" th:if="${error}">
                    <span th:text="#{${error}}"></span>
                </div>
                <div class="alert" th:if="${pwd}">
                    <span>Senha tempor√°ria do novo usu√°rio: </span>
                    <span th:text="${pwd}"></span>
                </div>
                <div class="user-info">
                    <span>Sr(a). <span th:text="${user.lastName}"></span></span>
                </div>
            </div>

            <!-- Tabs de Navega√ß√£o -->
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="courses">üìö Cursos</button>
                <button class="tab-btn" data-tab="classes">üìñ Turmas</button>
                <button class="tab-btn" data-tab="teachers">üë®‚Äçüè´ Professores</button>
                <button class="tab-btn" data-tab="students">üë• Alunos</button>
            </div>

            <!-- Tab 1: Cursos -->
            <div class="tab-content active" id="courses-tab">
                <section class="card">
                    <h2>Criar Novo Curso</h2>
                    <form class="form-container" action="/director/panel/new_course" method="post">
                        <div class="form-group">
                            <label class="form-label" for="name">Nome do Curso</label>
                            <input id="name"
                                   name="name"
                                   type="text"
                                   class="form-input"
                                   placeholder="Ex: Programa√ß√£o Web"
                                   required>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="code">C√≥digo do Curso</label>
                                <input id="code"
                                       name="code"
                                       type="text"
                                       class="form-input"
                                       placeholder="Ex: PROG" required>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="workload">Carga Hor√°ria</label>
                                <input id="workload" name="workload" type="number" class="form-input" placeholder="Ex: 60" min="0" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="description">Descri√ß√£o</label>
                            <textarea id="description"
                                      name="description"
                                      class="form-textarea"
                                      rows="4"
                                      placeholder="Descreva o curso..."
                                      required>
                            </textarea>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Criar Curso</button>
                            <button type="reset" class="btn btn-secondary">Limpar</button>
                        </div>
                    </form>
                </section>

                <!-- Lista de Cursos -->
                <section class="card">
                    <h2>Cursos Cadastrados</h2>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Curso</th>
                                    <th>C√≥digo</th>
                                    <th>Carga Hor√°ria</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="course : ${courses}">
                                    <td th:text="${course.name}"></td>
                                    <td th:text="${course.code}"></td>
                                    <td th:text="${course.workload}"></td>
                                    <td>
                                        <form method="post" action="/director/panel/course">
                                            <input type="hidden" name="publicId" th:value="${course.publicId}">
                                            <button id="edit"
                                                    name="action"
                                                    type="submit"
                                                    value="EDIT"
                                                    class="btn btn-secondary btn-small">
                                                Editar
                                            </button>
                                            <button id="delete"
                                                    name="action"
                                                    type="submit"
                                                    value="DELETE"
                                                    class="btn btn-secondary btn-small">
                                                Deletar
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>

            <div class="tab-content" id="classes-tab">
                <section class="card">
                    <h2>Criar Nova Turma</h2>
                    <form class="form-container" method="post" action="/director/panel/new_class">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="code">C√≥digo da Turma</label>
                                <input name="code"
                                       id="code"
                                       type="text"
                                       class="form-input"
                                       placeholder="Ex: PROG5051"
                                       required>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="coursePublicId">Curso</label>
                                <select name="coursePublicId"
                                       id="coursePublicId"
                                       class="form-input"
                                       required>
                                    <option th:each="course : ${courses}"
                                            th:value="${course.publicId}"
                                            th:text="${course.name}">
                                    </option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Criar Turma</button>
                            <button type="reset" class="btn btn-secondary">Limpar</button>
                        </div>
                    </form>
                </section>

                <!-- Lista de Cursos -->
                <section class="card">
                    <h2>Turmas Cadastradas</h2>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                            <tr>
                                <th>Turma</th>
                                <th>Curso</th>
                                <th>Alunos</th>
                                <th>Adicionar</th>
                                <th>A√ß√µes</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="class : ${classes}">
                                <td th:text="${class.code}"></td>
                                <td th:text="${class.courseName}"></td>
                                <td th:text="${class.studentAmount}"></td>
                                <td>
                                    <form method="post" action="/director/panel/add_user">
                                        <input type="hidden" name="classPublicId" th:value="${class.publicId}">
                                        <label for="userPublicId"></label>
                                        <select name="userPublicId"
                                                id="userPublicId"
                                                class="form-input"
                                                style="display:inline-block;width:150px"
                                                required>
                                            <option th:each="student : ${students}"
                                                    th:value="${student.publicId}"
                                                    th:text="${student.firstName}">
                                            </option>
                                            <option th:each="teacher : ${teachers}"
                                                    th:value="${teacher.publicId}"
                                                    th:text="${teacher.firstName}">
                                            </option>
                                        </select>
                                        <button type="submit"
                                                class="btn btn-primary"
                                                style="display:inline-block">+</button>
                                    </form>
                                </td>
                                <td>
                                    <form method="post" action="/director/panel/class">
                                        <input type="hidden" name="publicId" th:value="${class.publicId}">
                                        <button id="edit"
                                                name="action"
                                                type="submit"
                                                value="EDIT"
                                                class="btn btn-secondary btn-small">
                                            Editar
                                        </button>
                                        <button id="delete"
                                                name="action"
                                                type="submit"
                                                value="DELETE"
                                                class="btn btn-secondary btn-small">
                                            Deletar
                                        </button>
                                    </form>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>

            <!-- Tab 2: Professores -->
            <div class="tab-content" id="teachers-tab">
                <section class="card">
                    <h2>Adicionar Professor</h2>
                    <form class="form-container" method="post" action="/director/panel/new_teacher">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="firstName">Nome</label>
                                <input id="firstName"
                                       name="firstName"
                                       type="text"
                                       class="form-input"
                                       placeholder="Ex: Pedro"
                                       required>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="lastName">Sobrenome</label>
                                <input id="lastName"
                                       name="lastName"
                                       type="text"
                                       class="form-input"
                                       placeholder="Ex: Silva"
                                       required>
                            </div>

                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="email">Email</label>
                                <input id="email"
                                       name="email"
                                       type="email"
                                       class="form-input"
                                       placeholder="Ex: pedro@escola.com"
                                       required>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Adicionar Professor</button>
                            <button type="reset" class="btn btn-secondary">Limpar</button>
                        </div>
                    </form>
                </section>

                <!-- Lista de Professores -->
                <section class="card">
                    <h2>Professores Cadastrados</h2>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>Turmas</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="teacher : ${teachers}">
                                    <td>
                                        <span th:text="${teacher.firstName}"></span>
                                        <span> </span>
                                        <span th:text="${teacher.lastName}"></span>
                                    </td>
                                    <td th:text="${teacher.email}"></td>
                                    <td>X</td>
                                    <td>
                                        <form method="post" action="/director/panel/teacher">
                                            <input type="hidden" name="publicId" th:value="${teacher.publicId}">
                                            <button id="edit"
                                                    name="action"
                                                    type="submit"
                                                    value="EDIT"
                                                    class="btn btn-secondary btn-small">
                                                Editar
                                            </button>
                                            <button id="delete"
                                                    name="action"
                                                    type="submit"
                                                    value="DELETE"
                                                    class="btn btn-secondary btn-small">
                                                Deletar
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>

            <!-- Tab 3: Alunos -->
            <div class="tab-content" id="students-tab">
                <section class="card">
                    <h2>Adicionar Aluno</h2>
                    <form class="form-container" method="post" action="/director/panel/new_student">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="firstName">Nome</label>
                                <input id="firstName" name="firstName" type="text" class="form-input" placeholder="Ex: Jo√£o" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="lastName">Sobrenome</label>
                                <input id="lastName" name="lastName" type="text" class="form-input" placeholder="Ex: Silva" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" aria-label="email">Email</label>
                            <input id="email" name="email" type="email" class="form-input" placeholder="Ex: joao@aluno.com" required>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Adicionar Aluno</button>
                            <button type="reset" class="btn btn-secondary">Limpar</button>
                        </div>
                    </form>
                </section>

                <!-- Lista de Alunos -->
                <section class="card">
                    <h2>Alunos Cadastrados</h2>
                    <div class="table-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Email</th>
                                    <th>A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:each="student : ${students}">
                                    <td>
                                        <span th:text="${student.firstName}"></span>
                                        <span> </span>
                                        <span th:text="${student.lastName}"></span>
                                    </td>
                                    <td th:text="${student.email}"></td>
                                    <td>
                                        <form method="post" action="/director/panel/student">
                                            <input type="hidden" name="publicId" th:value="${student.publicId}">
                                            <button id="edit"
                                                    name="action"
                                                    type="submit"
                                                    value="EDIT"
                                                    class="btn btn-secondary btn-small">
                                                Editar
                                            </button>
                                            <button id="delete"
                                                    name="action"
                                                    type="submit"
                                                    value="DELETE"
                                                    class="btn btn-secondary btn-small">
                                                Deletar
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Navega√ß√£o entre tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
                
                this.classList.add('active');
                document.getElementById(tabName + '-tab').classList.add('active');
            });
        });
    </script>
</body>
</html>
