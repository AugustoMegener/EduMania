<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Professor - EduMania</title>
    <link rel="stylesheet" href="/static/base.css">
    <link rel="stylesheet" href="/static/panel-style.css">
</head>
<body>
    <div class="layout-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2>EduMania</h2>
            </div>

            <nav class="sidebar-menu">
                <!--<a href="#tasks" class="menu-item">‚úÖ Tarefas</a>-->
                <a href="/library" class="menu-item">üìö Biblioteca</a>
                <a href="/calendar" class="menu-item">üìÖ Calend√°rio</a>
                <!--<a href="#classes" class="menu-item">üë• Turmas</a>-->
                <!--<a href="#grades" class="menu-item">üìä Notas</a>-->
                <a href="/chat" class="menu-item">üí¨ Chat</a>
                <a href="/logout" class="menu-item">üö™ Sair</a>
            </nav>
        </aside>

        <!-- Conte√∫do Principal -->
        <main class="main-content">
            <!-- Cabe√ßalho -->
            <div class="panel-header">
                <div>
                    <h1>Painel do Professor - <span th:text="${code}"></span></h1>
                    <p class="subtitle">Gerencie suas aulas e tarefas</p>
                </div>
                <div class="user-info">
                    <span>üë®‚Äçüè´ Prof.</span>
                    <span th:text="${firstName}"></span>
                    <span th:text="${lastName}"></span>
                </div>
            </div>

            <!-- Tabs de Navega√ß√£o -->
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="tasks">‚úÖ Criar Tarefa</button>
                <button class="tab-btn" data-tab="materials">üìö Postar Material</button>
                <button class="tab-btn" data-tab="manage">‚öôÔ∏è Gerenciar</button>
            </div>

            <!-- Tab 1: Criar Tarefa -->
            <div class="tab-content active" id="tasks-tab">
                <section class="card">
                    <h2>Criar Nova Tarefa</h2>
                    <form class="form-container" method="post" action="./new_task">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="title">T√≠tulo da Tarefa</label>
                                <input id="title" name="title" type="text" class="form-input" placeholder="Ex: Exerc√≠cios de C√°lculo" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="dueDate">Data de Entrega</label>
                                <input id="dueDate" name="dueDate" type="date" class="form-input" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="description">Descri√ß√£o</label>
                            <textarea id="description" name="description" class="form-textarea" rows="5" placeholder="Descreva a tarefa..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="weight">Valor da Tarefa</label>
                            <input id="weight" name="weight" type="number" class="form-input" placeholder="Ex: 10" min="0" max="10" required>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Criar Tarefa</button>
                        </div>
                    </form>
                </section>

                <!-- Lista de Tarefas Criadas -->
                <section class="card">
                    <h2>Tarefas Recentes</h2>
                    <div class="items-list">
                        <div class="item-card" th:each="task : ${tasks}">
                            <div class="item-header">
                                <h3 th:text="${task.title}"></h3>
                            </div>
                            <p class="item-date">Vence em: <span th:text="${task.dueDate}"></span></p>
                            <p class="item-desc" th:text="${task.description}"></p>
                            <div class="item-actions">
                                <form method="post" action="./task" >
                                    <input type="hidden" name="publicId" th:value="${task.id}">
                                    <button id="edit"
                                            name="action"
                                            type="submit"
                                            value="EDIT"
                                            class="btn btn-secondary btn-small">
                                        Editar
                                    </button>
                                    <button id="delete"
                                            name="action"
                                            type="submit"
                                            value="DELETE"
                                            class="btn btn-secondary btn-small">
                                        Deletar
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab 2: Postar Material -->
            <div class="tab-content" id="materials-tab">
                <section class="card">
                    <h2>Postar Novo Material</h2>
                    <form class="form-container" method="post" action="./new_material" enctype="multipart/form-data">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="title">T√≠tulo do Material</label>
                                <input id="title"
                                       name="title"
                                       type="text"
                                       class="form-input"
                                       placeholder="Ex: Aula sobre Fotoss√≠ntese"
                                       required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="description">Descri√ß√£o</label>
                            <textarea id="description"
                                      name="description"
                                      class="form-textarea"
                                      rows="5" placeholder="Descreva o material..."
                                      required>
                            </textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Anexo</label>
                            <input name="files" type="file" class="form-input">
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Postar Material</button>
                        </div>
                    </form>
                </section>

                <!-- Lista de Materiais Postados -->
                <section class="card">
                    <h2>Materiais Postados</h2>
                    <div class="items-list">
                        <div class="item-card" th:each="resource : ${resources}">
                            <div class="item-header">
                                <h3 th:text="${resource.title}"></h3>
                            </div>
                            <p class="item-desc" th:text="${resource.description}"></p>
                            <a th:href="'/resource/'+${classId}+'/'+${resource.id}" th:text="${resource.fileName}"></a>
                            <div class="item-actions">
                                <form method="post" action="./resource" >
                                    <input type="hidden" name="publicId" th:value="${resource.id}">
                                    <button id="edit"
                                            name="action"
                                            type="submit"
                                            value="EDIT"
                                            class="btn btn-secondary btn-small">
                                        Editar
                                    </button>
                                    <button id="delete"
                                            name="action"
                                            type="submit"
                                            value="DELETE"
                                            class="btn btn-secondary btn-small">
                                        Deletar
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Tab 3: Gerenciar -->
            <div class="tab-content" id="manage-tab">
                <section class="card">
                    <h2>Minhas Turmas</h2>
                    <div class="classes-grid" th:each="class : ${otherClasses}">
                        <div class="class-card">
                            <h3 th:text="${class.code}"></h3>
                            <p class="class-info">üë• <span th:text="${class.studentAmount}"></span> alunos</p>
                            <p class="class-info" th:text="${class.courseName}"></p>
                            <a th:href="'/teacher/panel/'+${class.publicId}+'/'" class="btn btn-secondary">Gerenciar</a>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        // Navega√ß√£o entre tabs
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');

                // Remove active de todos os tabs
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));

                // Adiciona active ao tab clicado
                this.classList.add('active');
                document.getElementById(tabName + '-tab').classList.add('active');
            });
        });
    </script>
</body>
</html>
